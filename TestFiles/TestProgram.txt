BEGIN MASTER

Initiate
{
	// Gøres til globale variable af compileren/preprocessor,
    // så vi ikke har tonsvis af dem.

	pin button1 = digital input(4);
	pin button2 = digital input(5);
}

Listener (button1)
{
	int filteredInput = filterNoise(button1, flip);

	if (filteredInput == HIGH)
	{
		event button1Pressed = createEvent(filteredInput);
		broadcast(button1Pressed);
	}
}

END MASTER



BEGIN SLAVE

Initiate
{
	pin light1 = digital output(4);
pin light2 = digital output(5);
pin light3 = digital output(6);
}

EventHandler(button1Pressed)
{
	int value = getValue(light1);

	if (value == HIGH)
{
	write(light1, LOW);
}
else if (value == LOW)
{
	write(light1, HIGH);
}
}

EventHandler(button2Pressed)
{
	write(light1, HIGH);
	write(light2, HIGH);
	write(light3, HIGH);
}

END SLAVE

(EOF)
